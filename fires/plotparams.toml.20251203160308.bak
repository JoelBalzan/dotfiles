# -----------------------------------------------------------------------------
# plotparams.toml
# FIRES: Matplotlib Configuration Parameters
#
# This file contains all matplotlib-related configuration options for FIRES
# plotting functions. These parameters control figure appearance, styling,
# and output options.
# -----------------------------------------------------------------------------

[general]
# General plotting options
figsize    = None                # Default figure size [width, height] in inches, null for default
extension  = "pdf"                # File extension for saved plots
use_latex  = true                 # Use LaTeX for plot text rendering
show_plots = true                 # Display plots on screen
save_plots = true                 # Save plots to disk
legend     = false                 # Show legends in plots
legend_loc = "best"               # "best", "upper left", "outside right", "outside top"


[windows]
# Window visualization options
show_onpulse  = true             # Highlight on-pulse region
show_offpulse = true             # Highlight off-pulse region


[analytical]
# Options specific to analytical plots (pa_var, l_frac)
plot_scale        = "log"            # Scale: "linear",     "logx",   "logy",    "log"
draw_style        = "line-param"     # Style: "line-param", "line-x", "scatter", "binned"
plot_expected     = true             # Whether to draw expected model curves (exp_vars) (only works for expected V(PA))
fit_functions     = None             # Fit functions to apply: ['exp', 'power', 'log', 'linear', 'constant', 'broken-power' or 'power,N', 'poly,N' for power/polynomial of degree N]
weight_x_by       = "width"       # Parameter to normalize x-axis by
weight_y_by       = "meas_var_PA_i"  # Parameter to normalize y-axis by
legend_params     = None             # Parameters to show in legend
plot_text         = None             # Additional text to display
nbins             = 15               # Number of bins for binned plots
colour_by_sweep   = false            # Color points by sweep order
xlim              = None             # e.g., [0.01, 10] (must be >0 for logx/log)
ylim              = [2e-4,0.4]       # e.g., [0.0, 1.0]
x_measured        = "Vpsi"           # Use measured quantity on x-axis
equal_value_lines = 3                # Show constant parameter lines, only when using x_measured


[analytical.percentiles]
enabled = true        # master switch for percentile visualisation
p_low   = 16          # lower percentile
p_high  = 84          # upper percentile

[analytical.percentiles.y]
shade = true          # shade the Y percentile band between p_low and p_high
alpha = 0.20          # alpha for Y shaded region

[analytical.percentiles.x]
enabled = false       # when x_measured is used, show X percentiles per parameter step
style   = "bars"      # "bars" for horizontal error bars, "shade" for filled band between x_low..x_high
alpha   = 0.12        # alpha for X shaded band (used when style="shade")


# If [analytical.equal_lines] exists and enabled = true it overrides equal_value_lines above. Only when using x_measured
[analytical.equal_lines]
enabled          = true             # master switch
n_lines          = 5                # number of lines to draw
colour_mode      = "shades"         # "shades" or "cmap"
base_colour      = "blue"      # used when colour_mode   = "shades"
cmap_name        = "viridis"        # used when colour_mode = "cmap"
linestyle        = "--"
alpha            = 0.85
show_labels      = true
extend_outside   = false            # extend line to axes when not interpolating
extend_mode      = "linear"         # "linear" (slope at ends) or "flat"
label_position   = "start"          # "start" | "end" | "max-y" | "mid"
label_offset_pts = [6, -6]          # [dx, dy] in points to nudge labels
label_ha         = "left"           # horizontal alignment
label_va         = "top"            # vertical alignment

# label the data series (per-run)
[analytical.series_labels]
enabled       = true
params        = ["N"]      # which run-varying params to show, e.g., ["N"]
position      = "max-y"    # "max-y" | "min-y" | "start" | "end" | "max-x" | "min-x" | "mid"
fontsize      = 16
alpha         = 0.95
offset_pts    = [6, 6]     # [dx, dy] points offset from anchor
ha            = "left"     # text alignment
va            = "bottom"
avoid_overlap = true       # try to reduce label collisions (uses adjustText if available)


[observational]
enabled          = true        # master switch
marker           = "*"         # matplotlib marker
size             = 220         # marker size
colour           = "red"       # default colour (overridden if use_series_colour=true in multi-window)
edgecolor        = "black"     # marker edge
linewidth        = 1.0
alpha            = 1.0
error_style      = "spans"     # "spans" | "bars" | "both" | "none"
span_alpha       = 0.12        # alpha for shaded spans
bar_alpha        = 0.7         # alpha for error bars
bar_capsize      = 5
use_series_colour = false      # if true (multi-window), use series/window colour instead of fixed colour
label_prefix     = ""          # optional text prepended to label


[styling]
# Matplotlib styling options
pdf_fonttype    = 42
ps_fonttype     = 42
savefig_dpi     = 600
font_size       = 16
axes_labelsize  = 22
axes_titlesize  = 22
legend_fontsize = 20
xtick_labelsize = 22
ytick_labelsize = 22
font_family     = "sans-serif"
color_cycle     = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"]
line_width      = 1
marker_size     = 6

[latex]
# LaTeX-specific settings
preamble          = "\\usepackage{amsmath}\\usepackage{amssymb}\\usepackage{siunitx}"
fallback_on_error = true
